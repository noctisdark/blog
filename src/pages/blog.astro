---
import pluralize from "pluralize";
import Layout from "@layouts/Layout.astro";
import BlogHeader from "@layouts/blog/Header.astro";
import BlogCard from "@components/BlogCard.astro";

const posts = await Astro.glob("./blog/**/*.mdx");
const sortedPosts = posts
  .map((post) => post.frontmatter)
  .sort((a, b) => b.timestamp - a.timestamp);

const urlForPost = (post) =>
  `/blog/${pluralize(post.tag).toLowerCase()}/${post.slug}`;
---

<Layout
  title="/blog @ Noctisdark - Dev Blog"
  description="Grab a cup of coffee and start exploring. We hope you find something useful and entertaining along the way!"
>
  <BlogHeader>
    <ul slot="breadcrumbs-items">
      <li>
        <a href="/">/</a>
      </li>
      <li>
        <a href="/blog">blog</a>
      </li>
    </ul>
  </BlogHeader>
  <main
    class="max-w-screen-xl w-full px-4 py-8 flex flex-wrap gap-8 justify-center"
  >
    {
      sortedPosts.map((post) => (
        <a href={urlForPost(post)}>
          <BlogCard post={post} />
        </a>
      ))
    }
  </main>
</Layout>
